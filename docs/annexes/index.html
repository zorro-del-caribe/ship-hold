<!DOCTYPE html><html lang="en"><head><title>Ship-hold | Annexes</title><base href="http://zorro-del-caribe.github.io/ship-hold/"><meta charset="utf8"><meta name="description" content="documentation website for ship-hold project, a postgres data layer access library for nodejs"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="keywords" content="postgres, nodejs, javascript, sql, database, postgresql"><link rel="stylesheet" type="text/css" href="resources/theme.css"><link rel="stylesheet" type="text/css" href="resources/darkula.css"><link rel="apple-touch-icon" sizes="57x57" href="resources/apple-icon-57x57.png"><link rel="apple-touch-icon" sizes="60x60" href="resources/apple-icon-60x60.png"><link rel="apple-touch-icon" sizes="72x72" href="resources/apple-icon-72x72.png"><link rel="apple-touch-icon" sizes="76x76" href="resources/apple-icon-76x76.png"><link rel="apple-touch-icon" sizes="114x114" href="resources/apple-icon-114x114.png"><link rel="apple-touch-icon" sizes="120x120" href="resources/apple-icon-120x120.png"><link rel="apple-touch-icon" sizes="144x144" href="resources/apple-icon-144x144.png"><link rel="apple-touch-icon" sizes="152x152" href="resources/apple-icon-152x152.png"><link rel="apple-touch-icon" sizes="180x180" href="resources/apple-icon-180x180.png"><link rel="icon" type="image/png" sizes="192x192" href="resources/android-icon-192x192.png"><link rel="icon" type="image/png" sizes="32x32" href="resources/favicon-32x32.png"><link rel="icon" type="image/png" sizes="96x96" href="resources/favicon-96x96.png"><link rel="icon" type="image/png" sizes="16x16" href="resources/favicon-16x16.png"><link rel="manifest" href="resources/manifest.json"><meta name="msapplication-TileColor" content="#ffffff"><meta name="msapplication-TileImage" content="resources/ms-icon-144x144.png"><meta name="theme-color" content="#ffffff"><script src="resources/app.js" async></script></head><body><header><a class="visually-hidden" href="#main">Skip to content</a><button id="menu-toggle" type="button" aria-haspopup="true" aria-expanded="true" aria-controls="header-wrapper">close navigation</button><div id="header-wrapper" role="menu"><div id="logo-wrapper"><img alt="ship-hold logo" src="resources/ship-hold-logo.svg"><div><span>SHIP</span><span>-</span><span>HOLD</span></div></div><div id="main-navigation-container"><nav><a class="github" href="https://github.com/zorro-del-caribe/ship-hold">Github repository</a><ul><li class="top"><a href="./index.html"><span>Introduction</span></a><ul><li><a href="./index.html#getting-started"><span>Getting started</span></a><ul><li class="leaf"><a href="./index.html#installation"><span>Installation</span></a></li><li class="leaf"><a href="./index.html#initialisation"><span>Initialisation</span></a></li></ul></li><li><a href="./index.html#how-to-read"><span>How to read this documentation</span></a></li></ul></li><li class="top"><a href="builders/index.html"><span>Builders</span></a><ul><li><a href="builders/index.html#build"><span>.build()</span></a><ul><li class="leaf"><a href="builders/index.html#parameterized-query"><span>Parameterized queries</span></a></li></ul></li><li><a href="builders/index.html#clone"><span>.clone()</span></a></li><li><a href="builders/index.html#with"><span>.with(as, build)</span></a></li><li><a href="builders/index.html#common-types"><span>Common types</span></a><ul><li class="leaf"><a href="builders/index.html#pointers"><span>Pointers</span></a></li><li class="leaf"><a href="builders/index.html#values"><span>Values</span></a></li></ul></li></ul></li><li class="top"><a href="builders/insert/index.html"><span>INSERT builder</span></a><ul><li><a href="builders/insert/index.html#insert"><span>.insert(map,...othersProps)</span></a></li><li><a href="builders/insert/index.html#into"><span>.into(tableName)</span></a></li><li><a href="builders/insert/index.html#values"><span>.values(rows)</span></a></li><li><a href="builders/insert/index.html#returning"><span>.returning(...properties)</span></a></li></ul></li><li class="top"><a href="builders/update/index.html"><span>UPDATE builder</span></a><ul><li><a href="builders/update/index.html#update"><span>.update(tableName)</span></a></li><li><a href="builders/update/index.html#set"><span>.set(mapOrString, ?value)</span></a></li><li><a href="builders/update/index.html#from"><span>.from(...pointers)</span></a></li><li><a href="builders/update/index.html#where"><span>.where(leftOperand, operator, rightOperand)</span></a></li><li><a href="builders/update/index.html#returning"><span>.returning(...properties)</span></a></li></ul></li><li class="top"><a href="builders/delete/index.html"><span>DELETE builder</span></a><ul><li><a href="builders/delete/index.html#delete"><span>.delete(tableName)</span></a></li><li><a href="builders/delete/index.html#using"><span>.using(...pointers)</span></a></li><li><a href="builders/delete/index.html#where"><span>.where(leftOperand, operator, rightOperand)</span></a></li><li><a href="builders/delete/index.html#returning"><span>.returning(...properties)</span></a></li></ul></li><li class="top"><a href="builders/select/index.html"><span>SELECT builder</span></a><ul><li><a href="builders/select/index.html#select"><span>.select(...pointers)</span></a></li><li><a href="builders/select/index.html#from"><span>.from(...pointers)</span></a></li><li><a href="builders/select/index.html#joins"><span>Joins</span></a><ul><li class="leaf"><a href="builders/select/index.html#join"><span>.join(table, leftOp, rightOp)</span></a></li><li class="leaf"><a href="builders/select/index.html#left-join"><span>.leftJoin(table, leftOp, rightOp)</span></a></li><li class="leaf"><a href="builders/select/index.html#right-join"><span>rightJoin(table, leftOp, rightOp)</span></a></li><li class="leaf"><a href="builders/select/index.html#on"><span>.on(leftOperand, operator, rightOperand)</span></a></li></ul></li><li><a href="builders/select/index.html#group"><span>Group</span></a><ul><li class="leaf"><a href="builders/select/index.html#group-by"><span>.groupBy(...columns)</span></a></li><li class="leaf"><a href="builders/select/index.html#having"><span>.having(leftOp, operator, rightOp)</span></a></li></ul></li><li><a href="builders/select/index.html#where"><span>.where(leftOp, operator, rightOp)</span></a></li><li><a href="builders/select/index.html#pagination"><span>Pagination</span></a><ul><li class="leaf"><a href="builders/select/index.html#limit"><span>.limit(size, offset)</span></a></li></ul></li></ul></li><li class="top"><a href="builders/conditions/index.html"><span>Conditions builder</span></a><ul><li><a href="builders/conditions/index.html#factories"><span>Factories</span></a></li></ul></li><li class="top"><a href="run-queries/index.html"><span>Run queries</span></a><ul><li><a href="run-queries/index.html#run"><span>.run(params?:object)</span></a></li><li><a href="run-queries/index.html#debug"><span>.debug(params?:object)</span></a></li><li><a href="run-queries/index.html#stream"><span>.stream(sink: Generator, params?:object)</span></a></li></ul></li><li class="top"><a href="services/index.html"><span>Services</span></a><ul><li><a href="services/index.html#create-a-service"><span>Create a service</span></a><ul><li class="leaf"><a href="services/index.html#service"><span>.service(keyOrDef)</span></a></li></ul></li><li><a href="services/index.html#service-builders"><span>Service builders</span></a><ul><li class="leaf"><a href="services/index.html#insert"><span>.insert(...args)</span></a></li><li class="leaf"><a href="services/index.html#update"><span>.update(prosMap)</span></a></li><li class="leaf"><a href="services/index.html#delete"><span>.delete()</span></a></li><li class="leaf"><a href="services/index.html#select"><span>.select(...args)</span></a></li></ul></li></ul><li><a href="services/index.html#create-relations"><span>Create Relations</span></a><ul><li class="leaf"><a href="services/index.html#one-to-one"><span>One to one</span></a></li><li class="leaf"><a href="services/index.html#one-to-many"><span>One to many</span></a></li><li class="leaf"><a href="services/index.html#many-to-many"><span>Many to many</span></a></li></ul></li><li><a href="services#query-with-associations/index.html"><span>Queries with associations</span></a><ul><li class="leaf"><a href="services/index.html#include"><span>.include(...associations)</span></a></li></ul></li></li><li class="top"><a href="performances/index.html"><span>Performances</span></a><ul><li><a href="performances/index.html#result"><span>Result</span></a></li><li><a href="performances/index.html#why"><span>The good</span></a></li><li><a href="performances/index.html#where"><span>The bad</span></a></li></ul></li><li class="top"><a href="annexes/index.html"><span>Annexes</span></a><ul><li><a href="annexes/index.html#db-script"><span>Database script</span></a></li></ul></li></ul></nav></div></div></header><main id="main"><h1 id="annexes">Annexes</h1><h2 id="db-script">Database script</h2><p>All the examples mentioned in this documentation use a database generated with the following script.
</p><pre class="hljs"><code><span class="hljs-keyword">DROP</span> <span class="hljs-keyword">TABLE</span> <span class="hljs-keyword">IF</span> <span class="hljs-keyword">EXISTS</span> posts, <span class="hljs-keyword">users</span>, comments, tags, posts_tags <span class="hljs-keyword">CASCADE</span>;

<span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TABLE</span> <span class="hljs-keyword">users</span> (
    user_id <span class="hljs-built_in">serial</span> PRIMARY <span class="hljs-keyword">KEY</span>,
    email <span class="hljs-built_in">VARCHAR</span>(<span class="hljs-number">100</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-literal">NULL</span>,
    biography <span class="hljs-built_in">TEXT</span>,
    first_name <span class="hljs-built_in">VARCHAR</span>(<span class="hljs-number">100</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-literal">NULL</span>,
    last_name <span class="hljs-built_in">VARCHAR</span>(<span class="hljs-number">100</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-literal">NULL</span>
);

<span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TABLE</span> posts(
    post_id <span class="hljs-built_in">serial</span> PRIMARY <span class="hljs-keyword">KEY</span>,
    title <span class="hljs-built_in">VARCHAR</span> <span class="hljs-keyword">NOT</span> <span class="hljs-literal">NULL</span>,
    <span class="hljs-keyword">content</span> <span class="hljs-built_in">TEXT</span>,
    published_at <span class="hljs-built_in">TIMESTAMP</span>,
    user_id <span class="hljs-built_in">integer</span> <span class="hljs-keyword">REFERENCES</span> <span class="hljs-keyword">users</span> (user_id)
);

<span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TABLE</span> comments(
    comment_id <span class="hljs-built_in">serial</span> PRIMARY <span class="hljs-keyword">KEY</span>,
    <span class="hljs-keyword">content</span> <span class="hljs-built_in">TEXT</span>,
    published_at <span class="hljs-built_in">TIMESTAMP</span>,
    user_id <span class="hljs-built_in">integer</span> <span class="hljs-keyword">REFERENCES</span> <span class="hljs-keyword">users</span> (user_id),
    post_id <span class="hljs-built_in">integer</span> <span class="hljs-keyword">REFERENCES</span> posts (post_id)
);

<span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TABLE</span> tags(
    tag <span class="hljs-built_in">VARCHAR</span> PRIMARY <span class="hljs-keyword">KEY</span>,
    description <span class="hljs-built_in">TEXT</span>
);

<span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TABLE</span> posts_tags(
    post_id <span class="hljs-built_in">INTEGER</span> <span class="hljs-keyword">REFERENCES</span> posts,
    tag <span class="hljs-built_in">VARCHAR</span> <span class="hljs-keyword">REFERENCES</span> tags,
    PRIMARY <span class="hljs-keyword">KEY</span> (post_id, tag)
);
</code></pre></main></body></html>